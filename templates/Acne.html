<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='Main.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <title>DermaLens â€¢ Result</title>

    <style>
        :root {
            --brand-brown: #a18664;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…ÙˆØ­Ø¯Ø© Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ø´Ø·Ø© (Ù„Ù„ØªÙ†Ø§Ø³Ù‚) */
        .navigation .navLinks li a:hover,
        .navigation .navLinks li.active-page>a,
        .navigation .navLinks li.profile-menu.active-page>a {
            color: var(--brand-brown);
            font-weight: 600;
        }

        /* âœ… ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯Ø© */
        .profile-menu .dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 10px 0;
            min-width: 180px;
            z-index: 10;
        }

        .profile-menu.active .dropdown {
            display: block;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø£Ø®Ø±Ù‰ Ù„Ù„ØµÙØ­Ø© */
        .site-footer {
            /* Ù„ØªØ«Ø¨ÙŠØª Ù…ÙˆØ¶Ø¹Ù‡ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø±Ø¶ */
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 1000;
        }
    </style>
</head>

<body>

    <div id="details-hw" class="header-wrapper illness-header">
        <header>
            <nav class="navigation container">
                <div class="logo">
                    <a href="{{ url_for('diagnosis') }}">DermaLens</a>
                </div>
                <ul class="navLinks">
                    <li><a href="{{ url_for('history') }}" data-key="history">History</a></li>
                    <li><a href="{{ url_for('community') }}" data-key="community">Community</a></li>
                    <li><a href="{{ url_for('about') }}" data-key="about">About</a></li>

                    <li class="profile-menu" id="profile-toggle">
                        <a href="#" title="Account Menu" id="profileDropdownToggle"><i class="fa-solid fa-circle-user"></i></a>

                        <div class="dropdown">
                            <a href="#" id="profileLink" data-key="profile">Profile</a>

                            <div class="separator"></div>

                            <div class="lang-options">
                                <a onclick="switchLang('ar')">Ø¹Ø±Ø¨ÙŠ</a>
                                <a onclick="switchLang('en')">English</a>
                            </div>

                            <div class="separator" id="authSeparator"></div>

                            <a href="#" data-key="auth" id="authLink">Log Out</a>
                        </div>
                    </li>
                </ul>
            </nav>
        </header>

        <div class="illness-hero">
            <p data-key="youhave">You Have a <span class="percentage">{{ confidence }}%</span>
                <br>Chance that you have
            </p>

            <h1 id="diseaseNameDisplay">{{ pred_name }}</h1>

            <p class="description" data-key="description">A common skin condition that occurs when hair follicles become clogged with oil and dead skin cells. It mainly affects teenagers but can occur at any age, causing various types of bumps and blemishes</p>
        </div>

        <div class="video-container">
            <video id="video" class="video"
                src="{{ url_for('static', filename='Pics/video.mp4') }}"
                autoplay muted loop>
            </video>
        </div>

        <section class="details-sec">

            <div class="illness-card symptoms-card">
                <h3 data-key="Symptoms"><i class="fas fa-circle illness-icon"></i>Symptoms</h3>
                <ul class="symptoms-list">
                    <li class="symptom-item" data-key="s1">Blackheads and whiteheads</li>
                    <li class="symptom-item" data-key="s2">Small red, tender bumps (papules)</li>
                    <li class="symptom-item" data-key="s3">Pus-filled bumps (pustules)</li>
                    <li class="symptom-item" data-key="s4">Large, painful lumps (nodules)</li>
                    <li class="symptom-item" data-key="s5">Deep, pus-filled lumps (cysts)</li>
                    <li class="symptom-item" data-key="s6">Oily skin and enlarged pores</li>
                </ul>
            </div>

            <div class="illness-card image-card">
                <img src="{{ url_for('static', filename='Pics/images.jpg') }}" alt="Acne body locations">
                <div class="image-overlay">
                    <p data-key="picalt1">Areas where acne commonly occurs</p>
                </div>
            </div>

        </section>

        <section class="details-sec">
            <div class="illness-card image-card">
                <img src="{{ url_for('static', filename='Pics/skin-disease-human-health-problem-600nw-2530985179.webp') }}" alt="Acne symptoms">
                <div class="image-overlay">
                    <p data-key="picalt2">Different types of acne lesions</p>
                </div>
            </div>

            <div class="illness-card locations-card">
                <h3 data-key="appears"><i class="fas fa-map-marker-alt illness-icon"></i>It can appears in:</h3>
                <ul class="locations-list">
                    <li class="location-item" data-key="a1">Face and forehead</li>
                    <li class="location-item" data-key="a2">Chest and upper back</li>
                    <li class="location-item" data-key="a3">Shoulders</li>
                    <li class="location-item" data-key="a4">Neck and jawline</li>
                    <li class="location-item" data-key="a5">Upper arms</li>
                </ul>
            </div>
        </section>

        <footer class="site-footer">
            <div class="container">Dermalens. Copyright DERMALENS. All Rights Reserved</div>
        </footer>

</body>

<script>
    // âœ… Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…ÙˆØ­Ø¯Ø© ÙˆØ§Ù„Ù…ÙˆØ¬Ù‡Ø© Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    function logout() {
        localStorage.removeItem('token');
        localStorage.removeItem('loggedIn');
        const lang = localStorage.getItem('lang') || 'en';
        alert(lang === 'ar' ? 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­.' : 'Logged out successfully.');
        window.location.href = "{{ url_for('login') }}"; // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    }

    const video = document.getElementById('video');
    video.parentElement.addEventListener('mouseenter', () => video.setAttribute('controls', ''));
    video.parentElement.addEventListener('mouseleave', () => video.removeAttribute('controls'));


    /* Change the language */
    const translations = {
        ar: {
            history: "Ø§Ù„Ø³Ø¬Ù„",
            community: "Ø§Ù„Ù…Ø¬ØªÙ…Ø¹",
            about: "Ø¹Ù†Ø§",
            profile: "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ", 
            logout: "ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬", 
            // ğŸŒŸ Ø§Ø³ØªØ®Ø¯Ø§Ù… Placeholder: {percentage}
            youhave: "Ù„Ø¯ÙŠÙƒ Ø§Ø­ØªÙ…Ø§Ù„ Ø¨Ù†Ø³Ø¨Ø© {percentage}<br>Ù„Ù„Ø¥ØµØ§Ø¨Ø© Ø¨Ù€",
            diesase: "Ø­Ø¨ Ø§Ù„Ø´Ø¨Ø§Ø¨",
            description: "Ø­Ø§Ù„Ø© Ø¬Ù„Ø¯ÙŠØ© Ø´Ø§Ø¦Ø¹Ø© ØªØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ØªÙ†Ø³Ø¯ Ø¨ØµÙŠÙ„Ø§Øª Ø§Ù„Ø´Ø¹Ø± Ø¨Ø§Ù„Ø²ÙŠÙˆØª ÙˆØ®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¬Ù„Ø¯ Ø§Ù„Ù…ÙŠØªØ©. ØªØµÙŠØ¨ Ø¨Ø´ÙƒÙ„ Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…Ø±Ø§Ù‡Ù‚ÙŠÙ† Ù„ÙƒÙ†Ù‡Ø§ Ù‚Ø¯ ØªØ­Ø¯Ø« ÙÙŠ Ø£ÙŠ Ø¹Ù…Ø±ØŒ Ù…Ø³Ø¨Ø¨Ø© Ø£Ù†ÙˆØ§Ø¹Ù‹Ø§ Ù…Ø®ØªÙ„ÙØ© Ù…Ù† Ø§Ù„Ø¨Ø«ÙˆØ± ÙˆØ§Ù„Ø¹ÙŠÙˆØ¨ Ø§Ù„Ø¬Ù„Ø¯ÙŠØ©.",
            Symptoms: "Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶",
            s1: "Ø§Ù„Ø±Ø¤ÙˆØ³ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ ÙˆØ§Ù„Ø¨ÙŠØ¶Ø§Ø¡",
            s2: "Ø­Ø¨ÙˆØ¨ ØµØºÙŠØ±Ø© Ø­Ù…Ø±Ø§Ø¡ ÙˆÙ†Ø§Ø¹Ù…Ø© (Ø­Ø·Ø§Ø·Ø§Øª)",
            s3: "Ø­Ø¨ÙˆØ¨ Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„ØµØ¯ÙŠØ¯ (Ø¨Ø«Ø±Ø§Øª)",
            s4: "Ø¹Ù‚ÙŠØ¯Ø§Øª ÙƒØ¨ÙŠØ±Ø© ÙˆÙ…Ø¤Ù„Ù…Ø© (Ø¹Ù‚Ø¯)",
            s5: "ÙƒÙŠØ³Ø§Øª Ø¹Ù…ÙŠÙ‚Ø© Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„ØµØ¯ÙŠØ¯ (Ø£ÙƒÙŠØ§Ø³)",
            s6: "Ø¨Ø´Ø±Ø© Ø¯Ù‡Ù†ÙŠØ© ÙˆÙ…Ø³Ø§Ù…Ø§Øª ÙˆØ§Ø³Ø¹Ø©",
            picalt1: "Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙŠ ÙŠØ¸Ù‡Ø± ÙÙŠÙ‡Ø§ Ø­Ø¨ Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø¹Ø§Ø¯Ø©Ù‹",
            picalt2: "Ø£Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„ÙØ© Ù…Ù† Ø¢ÙØ§Øª Ø­Ø¨ Ø§Ù„Ø´Ø¨Ø§Ø¨",
            appears: "Ù‚Ø¯ ØªØ¸Ù‡Ø± ÙÙŠ:",
            a1: "Ø§Ù„ÙˆØ¬Ù‡ ÙˆØ§Ù„Ø¬Ø¨Ù‡Ø©",
            a2: "Ø§Ù„ØµØ¯Ø± ÙˆØ£Ø¹Ù„Ù‰ Ø§Ù„Ø¸Ù‡Ø±",
            a3: "Ø§Ù„ÙƒØªÙØ§Ù†",
            a4: "Ø§Ù„Ø±Ù‚Ø¨Ø© ÙˆØ§Ù„ÙÙƒ",
            a5: "Ø§Ù„Ø°Ø±Ø§Ø¹Ø§Ù† Ø§Ù„Ø¹Ù„ÙˆÙŠØªØ§Ù†",
            treatments: "Ø§Ù„Ø¹Ù„Ø§Ø¬"
        },
        en: {
            history: "History",
            community: "Community",
            about: "About",
            profile: "Profile",
            logout: "Log Out", 
            //  Ø§Ø³ØªØ®Ø¯Ø§Ù… Placeholder: {percentage}
            youhave: "You Have a {percentage}<br>Chance that you have",
            diesase: "Acne",
            description: "A common skin condition that occurs when hair follicles become clogged with oil and dead skin cells. It mainly affects teenagers but can occur at any age, causing various types of bumps and blemishes",
            Symptoms: "Symptoms",
            s1: "Blackheads and whiteheads",
            s2: "Small red, tender bumps (papules)",
            s3: "Pus-filled bumps (pustules)",
            s4: "Large, painful lumps (nodules)",
            s5: "Deep, pus-filled lumps (cysts)",
            s6: "Oily skin and enlarged pores",
            picalt1: "Areas where acne commonly occurs",
            picalt2: "Different types of acne lesions",
            appears: "It can appears in:",
            a1: "Face and forehead",
            a2: "Chest and upper back",
            a3: "Shoulders",
            a4: "Neck and jawline",
            a5: "Upper arms",
            treatments: "Treatments"
        }
    };

    // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬)
    function updateAuthLink(lang) {
        const authLink = document.getElementById('authLink');
        const isLoggedIn = localStorage.getItem('loggedIn') === 'true' && localStorage.getItem('token');

        if (!authLink) return;

        if (isLoggedIn) {
            authLink.textContent = translations[lang]['logout'];
            authLink.setAttribute('onclick', 'logout()');
            authLink.removeAttribute('href');
        } else {
            authLink.textContent = translations[lang]['login'];
            authLink.setAttribute('href', '{{ url_for('login') }}');
            authLink.removeAttribute('onclick');
        }
    }


    function switchLang(lang) {
        document.documentElement.lang = lang;
        document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";

        //  1. Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„Ù‡Ø§ Ù…Ù† Flask
        const percentageElement = document.querySelector('.percentage');
        // Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…Ø© (Ù…Ø«Ù„Ø§Ù‹ 55%) ÙˆÙ†Ø­Ø°Ù Ø¹Ù„Ø§Ù…Ø© %
        const currentPercentage = percentageElement ? percentageElement.textContent : "87%";

        document.querySelectorAll("[data-key]").forEach(el => {
            const icon = el.querySelector('i');
            const text = translations[lang][el.dataset.key];

            if (el.dataset.key === 'youhave' && text) {
                //  2. Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ù†Øµ Ø§Ù„ØªØ±Ø¬Ù…Ø©
                // Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ±Ø¬Ù… Ø§Ù„Ø¢Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {percentage}
                const translatedText = text.replace('{percentage}', `<span class="percentage">${currentPercentage}</span>`);
                el.innerHTML = translatedText;

            } else if (icon) {
                //If there's icons, keep it
                el.innerHTML = '';
                el.appendChild(icon);
                el.appendChild(document.createTextNode(' ' + text));

            } else if (text) {
                // If there's no icon
                el.innerHTML = text;
            }
        });
        
        // ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø¨Ø¹Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ØºØ©
        updateAuthLink(lang);

        // save the chosen lang in localStorage
        localStorage.setItem("lang", lang);
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Image click to show larger version
        const images = document.querySelectorAll('.image-card img');
        images.forEach(img => {
            img.addEventListener('click', function() {
                const overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                    cursor: pointer;
                `;

                const largeImg = document.createElement('img');
                largeImg.src = this.src;
                largeImg.style.cssText = `
                    max-width: 90%;
                    max-height: 90%;
                    border-radius: 10px;
                `;

                overlay.appendChild(largeImg);
                document.body.appendChild(overlay);

                overlay.addEventListener('click', () => {
                    document.body.removeChild(overlay);
                });
            });
        });

        // Add fade-in animation to cards
        const cards = document.querySelectorAll('.illness-card');
        cards.forEach((card, index) => {
            setTimeout(() => {
                card.classList.add('fade-in');
            }, index * 200);
        });

        // ğŸŒŸ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ© ÙˆÙ…Ù†Ø·Ù‚ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯
        const savedLang = localStorage.getItem("lang") || "en";
        switchLang(savedLang);

        const profileToggle = document.getElementById('profile-toggle');
        const profileLink = document.getElementById('profileLink');

        // âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        if (profileLink) {
            profileLink.addEventListener('click', function(event) {
                const isLoggedIn = localStorage.getItem('loggedIn') === 'true' && localStorage.getItem('token');
                const currentLang = localStorage.getItem('lang') || 'en';

                if (!isLoggedIn) {
                    event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                    alert(currentLang === 'ar' ? "ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ." : "You must log in to view the profile.");
                    window.location.href = "{{ url_for('login') }}"; // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                } else {
                    window.location.href = "{{ url_for('profile') }}";
                }
                if (profileToggle) profileToggle.classList.remove('active');
            });
        }


        if (profileToggle) {
            profileToggle.addEventListener('click', function(event) {
                // Ù…Ù†Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                if (event.target.tagName !== 'A' || event.target.id === 'profileDropdownToggle') {
                    event.preventDefault();
                }
                this.classList.toggle('active');
            });

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.addEventListener('click', (event) => {
                if (!profileToggle.contains(event.target)) {
                    profileToggle.classList.remove('active');
                }
            });
        }
    });

</script>

</html>